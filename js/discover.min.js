document.getElementById("year").textContent=(new Date).getFullYear();const parallax=document.getElementById("parallax");const depthNodes=parallax?Array.from(parallax.querySelectorAll("[data-depth]")):[];let mouseX=0,mouseY=0;let rafId=0;function onMove(e){const rect=document.body.getBoundingClientRect();mouseX=(e.clientX-rect.width/2)/rect.width;mouseY=(e.clientY-window.innerHeight/2)/window.innerHeight;if(!rafId)rafId=requestAnimationFrame(updateParallax)}function updateParallax(){depthNodes.forEach(node=>{const d=parseFloat(node.dataset.depth||"0");const tx=-mouseX*d*30;const ty=-mouseY*d*30;node.style.transform=`translate3d(${tx}px, ${ty}px, 0)`});rafId=0}window.addEventListener("mousemove",onMove,{passive:true});const canvas=document.getElementById("fx");const ctx=canvas.getContext("2d");let W,H,particles=[],clickParticles=[];function resize(){W=canvas.width=innerWidth;H=canvas.height=innerHeight}window.addEventListener("resize",()=>{resize();spawn(true)});function rand(a,b){return Math.random()*(b-a)+a}function colorMix(t){return`rgba(${34+t*(139-34)}, ${211-t*(211-92)}, ${238-t*(238-246)}, ${.16+.12*Math.sin(performance.now()/800)})`}function spawn(reset=false){const count=Math.max(120,Math.floor(W*H/1e4));if(reset)particles=[];while(particles.length<count){particles.push({x:rand(0,W),y:rand(0,H),vx:rand(-.2,.2),vy:rand(.15,.45),r:rand(.6,2.2)})}}let mx=0,my=0;window.addEventListener("mousemove",e=>{mx=e.clientX;my=e.clientY;for(let i=0;i<2;i++){clickParticles.push({x:e.clientX+rand(-10,10),y:e.clientY+rand(-10,10),vx:rand(-2,2),vy:rand(-2,2),r:rand(1,3),life:60})}});window.addEventListener("click",e=>{for(let i=0;i<10;i++){clickParticles.push({x:e.clientX+rand(-20,20),y:e.clientY+rand(-20,20),vx:rand(-4,4),vy:rand(-4,4),r:rand(2,5),life:120})}});function step(){ctx.clearRect(0,0,W,H);const t=(Math.sin(performance.now()/1200)+1)/2;particles.forEach(p=>{p.vx+=(Math.random()-.5)*.02;p.vy+=.01+(Math.random()-.5)*.01;p.x+=p.vx;p.y+=p.vy;p.vx*=.95;p.vy*=.95;if(p.x<-10)p.x=W+10;if(p.x>W+10)p.x=-10;if(p.y<-10)p.y=H+10;if(p.y>H+10)p.y=-10;ctx.beginPath();ctx.fillStyle=colorMix(t);ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill()});clickParticles=clickParticles.filter(p=>{p.x+=p.vx;p.y+=p.vy;p.vx*=.98;p.vy*=.98;p.life--;if(p.life>0){ctx.beginPath();ctx.fillStyle=`rgba(34, 211, 238, ${p.life/120})`;ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();return true}return false});requestAnimationFrame(step)}resize();spawn(true);step();const mobileMenuBtn=document.getElementById("mobile-menu-btn");const mobileMenuOverlay=document.getElementById("mobile-menu-overlay");const mobileMenuClose=document.getElementById("mobile-menu-close");const mobileMenuLinks=mobileMenuOverlay.querySelectorAll("a");function toggleMobileMenu(){mobileMenuOverlay.classList.toggle("show")}function closeMobileMenu(){mobileMenuOverlay.classList.remove("show")}mobileMenuBtn.addEventListener("click",toggleMobileMenu);mobileMenuClose.addEventListener("click",closeMobileMenu);mobileMenuLinks.forEach(link=>{link.addEventListener("click",closeMobileMenu)});